#!/bin/bash

# Функция для запуска одного теста
run_single_test() {
    TEST_NAME="$1"
    INPUT_DATA="$2"
    EXPECTED_OUTPUT="$3"

    echo "--- Запуск теста: $TEST_NAME ---"

    ACTUAL_OUTPUT=$(echo -e "$INPUT_DATA" | ./task240)

    if [ "$ACTUAL_OUTPUT" == "$EXPECTED_OUTPUT" ]; then
        echo "✅ Успех: $TEST_NAME"
    else
        echo "❌ Провал: $TEST_NAME"
        echo "Входные данные:"
        echo -e "$INPUT_DATA"
        echo "Ожидаемый вывод:"
        echo -e "$EXPECTED_OUTPUT"
        echo "Фактический вывод:"
        echo -e "$ACTUAL_OUTPUT"
    fi
    echo ""
}

# Тест 1: Пустой ввод
run_single_test "Пустой ввод" "" ""

# Тест 2: Нет чисел, которые встречаются 3 раза
run_single_test "Нет чисел, которые встречаются 3 раза" "1 2 3 4 5" ""

# Тест 3: Одно число встречается 3 раза
run_single_test "Одно число встречается 3 раза" "10 20 10 30 10" "[10]"

# Тест 4: Несколько чисел встречаются 3 раза (разный порядок)
run_single_test "Несколько чисел встречаются 3 раза (разный порядок)" "1 2 1 3 2 1 4 2 5" "[1][2]"

# Тест 5: Несколько чисел встречаются 3 раза (последовательный порядок)
run_single_test "Несколько чисел встречаются 3 раза (последовательный порядок)" "5 5 5 1 2 3 6 6 6" "[5][6]"

# Тест 6: Числа с разделителями (пробелы, переносы строк)
run_single_test "Числа с разделителями" "10\n20\n10 30 10" "[10]"

# Тест 7: Числа встречаются больше 3 раз (должны быть проигнорированы)
run_single_test "Числа встречаются больше 3 раз" "7 7 7 7 8 8 8 8 8" ""

# Тест 8: Большие числа
run_single_test "Большие числа" "1234567890 123 1234567890 456 1234567890" "[1234567890]"

# Тест 9: Комбинация различных случаев
run_single_test "Комбинация различных случаев" "1 2 3 1 2 3 1 2 4 5 5 5 6 6" "[1][2][5]"

# Тест 10: Числа встречаются ровно 3 раза и другое число встречается 2 раза
run_single_test "Числа ровно 3 раза и 2 раза" "1 1 1 2 2 3 4 4 4" "[1][4]"

# Очистка скомпилированной программы
rm task240
